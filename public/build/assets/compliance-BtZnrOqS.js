let o=null;document.addEventListener("DOMContentLoaded",()=>{localStorage.getItem("cookie_consent")||l()});window.handleCookie=function(e){const n=e?"all":"essential";localStorage.setItem("cookie_consent",n),d(),console.log("Compliance: Cookies gesetzt auf:",n)};function l(){const e=document.getElementById("cookie-banner"),n=document.body;if(e){e.classList.add("active"),n.classList.add("cookie-open");const t=e.querySelector(".btn-primary");t&&(t.focus(),o=t),e.addEventListener("keydown",r),e.addEventListener("focusin",a),document.addEventListener("focusin",c),document.addEventListener("click",c)}}function d(){const e=document.getElementById("cookie-banner"),n=document.body;e&&(e.classList.remove("active"),n.classList.remove("cookie-open"),e.removeEventListener("keydown",r),e.removeEventListener("focusin",a),document.removeEventListener("focusin",c),document.removeEventListener("click",c))}function a(e){o=e.target}function c(e){const n=document.getElementById("cookie-banner");if(n.classList.contains("active")&&!n.contains(e.target))if(e.stopPropagation(),e.preventDefault(),o)o.focus();else{const t=n.querySelector(".btn-primary");t&&t.focus()}}function r(e){const t=document.getElementById("cookie-banner").querySelectorAll("button, a[href]");if(t.length===0)return;const s=t[0],i=t[t.length-1];e.key==="Tab"&&(e.shiftKey?document.activeElement===s&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),s.focus()))}
